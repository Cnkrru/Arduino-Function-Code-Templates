#  Arduino1 核心知识整理

##  一、硬件基础

### （一）核心接口与引脚

1. **GND**：接地引脚，提供 0V 参考电位
2. **数字输入/输出端口**：

  \- 支持 INPUT（输入）、OUTPUT（输出）、INPUT_PULLUP（上拉输入）三种模式。

  \- 注意：端口 0（RX）和 1（TX）为串口通讯专用引脚，默认用于与电脑交互，若需外接其他器件需谨慎，尽量避免占用串口端口。

3. **模拟输入端口**：专门用于读取模拟信号（如电位器、传感器输出），通常标注为 A0~A5（不同版型数量可能不同）。
4. **电源端口**：用于给 Arduino 板供电或对外接器件供电（常见 5V、3.3V 输出）。

 

### （二）常用硬件与电路规则

1. **面包板**：

  \- 横排：电源总线，用于统一供电（建议分别接入 5V 和 GND，避免混接）。

  \- 竖排：器件连接区，每一列的 5 个插孔相互导通，用于搭建临时电路。

2. **LED 电路**：

  \- 必须串联限流电阻，防止 LED 过流烧毁。

  \- 关键参数：LED 典型工作电流 20mA，正向电压降约 2V（不同颜色略有差异）。

  \- 电阻选型：根据供电电压计算（如 5V 供电时，限流电阻 = (5V - 2V)/0.02A = 150Ω，实际可选用 150Ω~220Ω 范围，略大更安全）。

3. **电位器（滑动变阻器）**：

  \- 三引脚结构：1 脚接 GND，3 脚接 5V，2 脚（中间引脚）作为信号输出端，接入模拟输入端口。

  \- 作用：通过滑动改变中间引脚的分压，输出 0~5V 连续变化的模拟电压。

 

##  二、编程基础

### （一）语言与变量

1. **编程语言**：基于 C++ 开发，语法兼容 C++ 核心特性
2. **变量作用域**：

  \- 局部变量：定义在函数内部，仅在该函数内有效，函数执行结束后释放内存。

  \- 全局变量：定义在所有函数外部（通常在代码开头），整个程序中所有函数均可访问。

  \- 注意：避免使用同名的局部变量和全局变量，会导致变量遮蔽，引发逻辑错误。

 

### （二）核心程序结构

1. **void setup() 函数**：

  \- 作用：程序初始化，仅在 Arduino 上电或复位后执行一次。

  \- 常用场景：设置引脚模式（pinMode）、初始化串口（Serial.begin）、配置传感器等。

2. **void loop() 函数**：

  \- 作用：主循环函数，setup() 执行完毕后，会无限循环执行 loop() 内的代码。

  \- 常用场景：数据读取（digitalRead/analogRead）、逻辑判断、输出控制（digitalWrite/analogWrite）等核心功能。

 

## 三、核心函数分类（按功能模块）

###  （一）引脚模式与 I/O 控制函数

1. #### pinMode(引脚编号, 模式)

\- 功能：配置指定引脚的工作模式。

\- 参数说明：

 \- 引脚编号：数字引脚（0~13 等）或模拟引脚（A0~A5 等，作为数字引脚使用时可直接写编号）。

 \- 模式：INPUT（输入模式，高阻抗约 100MΩ，用于检测外部高/低电位）

​               OUTPUT（输出模式，用于驱动 LED、电机等器件）

​               INPUT_PULLUP（内置上拉输入模式，无需外接上拉电阻，默认检测高电位，外部触发时拉低）。

\- 应用场景：按钮开关连接（INPUT 模式需搭配外接上拉/下拉电阻，INPUT_PULLUP 模式可简化电路）。

 

2. #### digitalWrite(引脚编号, 电平)

\- 功能：向数字引脚输出高/低电平。

\- 参数说明：

 \- 引脚编号：需先通过 pinMode 配置为 OUTPUT 模式。

 \- 电平：HIGH（输出高电平，约 5V）、LOW（输出低电平，约 0V）。

\- 应用场景：控制 LED 亮灭、继电器开关、直流电机启停等。

 

3. #### digitalRead(引脚编号)

\- 功能：读取数字引脚的当前电平状态。

\- 参数说明：引脚编号需先通过 pinMode 配置为 INPUT 或 INPUT_PULLUP 模式。

\- 返回值：HIGH（高电位）或 LOW（低电位）。

\- 应用场景：检测按钮是否按下、传感器数字信号输出等（可将返回值赋值给变量，供后续逻辑判断或 digitalWrite 调用）。

 

###  （二）模拟信号处理函数

#### analogRead(模拟引脚编号)

\- 功能：读取模拟引脚的模拟电压信号，并转换为数字值。

\- 核心特性：

 \- 采样精度：10 位（2^10），返回值范围 0~1023（对应输入电压 0~5V，即 1 个数字值 ≈ 4.88mV）。

 \- 采样速率：约每秒 10000 次（10kHz），无需手动配置速率。

\- 应用场景：读取电位器位置、温度传感器（如 LM35）的模拟输出、光线传感器亮度信号等。

 

####  analogWrite(引脚编号, 占空比)

\- 功能：通过 PWM（脉冲宽度调制）方式输出模拟效果（非真正模拟电压，而是通过占空比控制平均电压）。

\- 核心限制：仅支持特定数字引脚（通常标注 ~ 符号，如 3、5、6、9、10、11 等，不同版型略有差异）。

\- 参数说明：

 \- 引脚编号：无需手动配置为 PWM 模式，直接调用即可（底层自动适配）。

 \- 占空比：范围 0~255（0 对应完全关闭，255 对应完全开启）。

\- 应用场景：调节 LED 亮度、控制直流电机转速、调节舵机角度（部分舵机支持）等。

 

#### map(原值, 原最小值, 原最大值, 目标最小值, 目标最大值)

\- 功能：将一个数值从原范围等比映射到目标范围（线性转换），常用于电压/数字值、不同量程的信号转换。

\- 参数说明：

 \- 原值：需要转换的原始数据（如 analogRead 的返回值 0~1023）。

 \- 原最小值/原最大值：原始数据的取值范围。

 \- 目标最小值/目标最大值：转换后数据的取值范围。

\- 示例：map(analogRead(A0), 0, 1023, 0, 255) → 将模拟读取的 0~1023 转换为 PWM 所需的 0~255。

\- 注意：映射结果为整数，若需高精度浮点数转换，需手动通过公式计算。

 

### （三）串口通讯函数

####  Serial.begin(波特率)

\- 功能：初始化串口通讯，建立 Arduino 与电脑（或其他串口设备）的数据传输通道。

\- 参数说明：波特率（每秒传输的比特数），需与串口监视器（或外接设备）的波特率一致，常用值 9600（默认推荐）、19200、38400、115200 等。

\- 应用场景：在 setup() 中初始化，后续通过 Serial 系列函数发送/接收数据。

 

#### Serial.println(数据/字符串)

\- 功能：向串口发送数据（字符串、数字、变量等），并自动在末尾添加换行符（\n）。

\- 补充函数：

 \- Serial.print()：与 println 功能一致，但不添加换行符。

 \- Serial.read()：读取串口接收到的数据。

\- 应用场景：调试程序（输出变量值、程序运行状态）、与电脑或其他串口设备交互数据。

 

### （四）时间控制函数

####  delay(毫秒数)

\- 功能：暂停程序执行指定的毫秒数（1 秒 = 1000 毫秒）。

\- 参数说明：毫秒数（可直接写数值，如 500；或赋值给变量，如 delay(time_val)）。

\- 注意：delay 期间，程序会阻塞，无法执行其他操作（如需非阻塞延时，需使用 millis() 函数实现）。

\- 应用场景：控制 LED 闪烁间隔、电机运行时长、传感器采样间隔等。

 

##  四、逻辑运算与控制技巧

### （一）核心逻辑运算符

1. **!（非运算符）**：反转逻辑状态（如 !HIGH = LOW，!digitalRead(2) 表示读取引脚 2 的反状态），常用于反向控制（如按钮按下时关闭 LED，松开时点亮）。
2. **&&（与运算符）**：多个条件同时满足时，逻辑才成立（如 button1 == HIGH && button2 == HIGH → 两个按钮都按下时执行操作），适用于多控场景。
3. **||（或运算符）**：任意一个条件满足时，逻辑即成立（如 button1 == HIGH || button2 == HIGH → 任意一个按钮按下时执行操作），适用于多触发源场景。

 

### （二）实用控制技巧

1. **按钮控制电机/LED 反向逻辑**：通过 ! 运算符或修改 digitalWrite 的 HIGH/LOW 电平，实现按钮按下与设备状态的反向关联 buttonState = digitalRead(buttonPin); 

   digitalWrite(motorPin, !buttonState)）。

2. **PWM 原理补充**：脉冲宽度调制（PWM）是通过快速切换引脚的通断状态，改变一个周期内“导通时间”与“总周期时间”的比例（占空比），利用人眼或电机的惯性产生“模拟效果”（如占空比 50% 时，LED 亮度为半亮，电机转速为半速）。